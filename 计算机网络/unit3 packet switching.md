## what is packet switching
### circuit switching
分组交换的前身是电路交换，用于早期的电话系统，可以通过三步解析它，首先是拨号，这告诉了交换机我们想要连接的端点，从而建立专用的电路，然后是使用，在我们说话的过程中，声信号被转换成电信号通过交换机建立的电路传递，最后是挂断，要移除该专用电路和路径上交换机的任意状态![输入图片说明](/imgs/2025-08-15/bjHCJUR65UbWrACX.png)示意图

![输入图片说明](/imgs/2025-08-15/6C6cE8LGdb6Mf3ij.png)电路交换的性质

电路交换在电话系统中运行的很好，但是用于计算机通信时会有一些问题：
1. 效率不高，计算机通信中常见猝发通信，并且可能在建立连接后进入长时间的沉默，如浏览网页时，电路交换在专用电路建立时是独占的，不允许在结束断开连接时被别的通信使用该线路，因此易造成效率低下
2. 多样化的速率，计算机通信中不同应用不同时间的传输速率一般是不同的，电路交换的单一线路提供的速率不符合实际使用情况
3. 状态维护，在电路交换中，我们需要维护所有的状态，如果出现故障，我们需要进入并更改这些状态，来重新路由电话
### packet switching
分组交换网络由端主机、链路和分组交换机组成，路由器也是分组交换机的一种，它处理互联网地址![输入图片说明](/imgs/2025-08-15/mJ4gWgnQSEnA2F66.png)分组交换示意图

分组交换机有缓冲区（buffer），假设有两个数据包以输出链路的全速率同时到达一个分组交换机时，数据包交换机必须保留其中一个，一次只能发送一个，因一个交换机可能有多个输入链路，因此要有一个缓冲区来保存多个数据包
![输入图片说明](/imgs/2025-08-17/oIDhbixS2vnV8tr1.png)
分组交换的性质

### why use it
![输入图片说明](/imgs/2025-08-18/ZP8H1ACvwOhl9sdD.png)使用分组交换的原因

第三个重要原因是，互联网最初被设计成已有网络的互连，当时所有的通信网络/计算机网络都是分组交换的，互联网要连接这些网络就也要使用分组交换
## 传播延迟与分组延迟
### useful definition
![输入图片说明](/imgs/2025-08-18/5ECYxlTHARUFFHjq.png)传播延迟的定义
和链路大小无关，只和链路长度和传播速度（一般是光速）有关

![输入图片说明](/imgs/2025-08-19/eTc1S2qTnYxMG0rD.png)
分组延迟的定义
是从分组的第一个bit被放到链路上开始，到最后一个bit被放到链路上所用的时间，本质上取决于我们可以打包（packet）的有多紧
### end-to-end delay
端到端延迟是从在第一个链路上发送的第一个bit开始，直到数据包最后一个bit到达目的地所用的时间，是分组延迟和传播延迟的和
![输入图片说明](/imgs/2025-08-19/c5a7bk72okhgAU3f.png)端到端延迟
![输入图片说明](/imgs/2025-08-19/MPpCiS46oHxtvSFq.png)example

链路在所用用户的数据包之间是共享的，多个数据包在交换机处可能需要在缓冲区等待，称有大量数据包在队列等待通过的行为的下一条链路为拥塞
在缓冲区存在的情况下，端到端的延迟还需要多考虑在各个交换机的等待时间，即排队延迟
![输入图片说明](/imgs/2025-08-19/9vgMw51pV4ICtCZs.png)考虑排队延迟后的公式

## queueing delay
一些应用，如视频播放器/网站、语音通话、音乐软件等，会更看重数据的实时性，因此其对于排队延迟更敏感，为解决排队延迟带来的问题，一般会采用数据缓冲区
<!--stackedit_data:
eyJoaXN0b3J5IjpbNTg1NzQ0NTUyLDMyNjg4MTYwMSwxMzk3MT
Q0MjUxLDMzMjM2OTM0NywzODA3MTgxMzEsNTQ0NDQzOTc4LDIx
NDM2MjUxNzUsMTQzMzg1MzA4NiwtNTQ0MDc2MTA0LC0yMDg4Nz
Q2NjEyXX0=
-->